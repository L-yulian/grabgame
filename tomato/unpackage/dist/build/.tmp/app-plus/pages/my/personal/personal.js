(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/personal/personal"],{"40e2":function(t,e,n){"use strict";n.r(e);var i=n("cfa8"),s=n("687c");for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n("8a7a");var o=n("2877"),c=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},"687c":function(t,e,n){"use strict";n.r(e);var i=n("d968"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=s.a},"699d":function(t,e,n){},"8a7a":function(t,e,n){"use strict";var i=n("699d"),s=n.n(i);s.a},cfa8:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"page t-common-font"},[n("uni-nav-bar",{staticClass:"navBox",attrs:{"left-icon":"back",fixed:"true",rightText:"保存",color:"#000",shadow:"false",title:"个人资料",eventid:"5665d181-0",mpcomid:"5665d181-0"},on:{"click-left":t.back,"click-right":t.save}}),n("view",{staticStyle:{height:"64px"}}),n("view",{staticClass:"uni-card"},[n("view",{staticClass:"uni-list"},[n("view",{staticClass:"uni-list-cell",attrs:{"hover-class":"uni-list-cell-hover"}},[n("view",{staticClass:"uni-list-cell-navigate uni-navigate-right uni-navigate-badge",attrs:{eventid:"5665d181-1"},on:{tap:t.updateAvator}},[t._v("头像"),n("image",{staticClass:"content-span userPic",attrs:{mode:"aspectFill",src:t.avator}})])]),n("view",{staticClass:"uni-list-cell",attrs:{"hover-class":"uni-list-cell-hover"}},[n("view",{staticClass:"uni-list-cell-navigate uni-navigate-right uni-navigate-badge",attrs:{eventid:"5665d181-2"},on:{tap:t.editNickName}},[t._v("昵称"),n("span",{staticClass:"content-span"},[t._v(t._s(t.nickName))])])]),n("view",{staticClass:"uni-list-cell",attrs:{"hover-class":"uni-list-cell-hover"}},[n("view",{staticClass:"uni-list-cell-left"},[t._v("性别")]),n("view",{staticClass:"uni-list-cell-navigate uni-navigate-right uni-navigate-badge uni-list-cell-db",staticStyle:{padding:"5rpx 30rpx","justify-content":"flex-end"}},[n("picker",{attrs:{mode:"selector",range:t.sexs,value:t.sexIndex,eventid:"5665d181-3"},on:{change:t.bindPickerChange}},[n("view",{staticClass:"uni-input",staticStyle:{width:"500rpx","text-align":"right"}},[t._v(t._s(t.sexs[t.sexIndex]))])])],1)]),n("view",{staticClass:"uni-list-cell uni-list-cell-last",attrs:{"hover-class":"uni-list-cell-hover"}},[n("view",{staticClass:"uni-list-cell-navigate uni-navigate-badge"},[t._v("手机号"),n("span",{staticClass:"content-span"},[t._v(t._s(t.userInfo.mobile))])])])])]),n("neil-modal",{attrs:{show:t.showInput,title:"请输入昵称",eventid:"5665d181-5",mpcomid:"5665d181-1"},on:{close:t.closeModal,confirm:t.editDone}},[n("view",{staticClass:"input-view"},[n("view",{staticClass:"input-name"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",placeholder:"请输入昵称",eventid:"5665d181-4"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])])])],1)},s=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},d968:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("be9e")),s=a(n("eeb5"));function a(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{showInput:!1,showPick:!1,sexs:["保密","男","女"],content:"",index:0}},methods:{editNickName:function(){this.showInput=!this.showInput},bindPickerChange:function(t){console.log("picker发送选择改变，携带值为",t.target.value),this.sexIndex=t.target.value},closeModal:function(){this.showInput=!this.showInput},editDone:function(){},save:function(){0==this.content.length&&(this.content=this.userInfo.user_name),this.$utils.tRequest({url:this.$webUrl+"user_info_edit",method:"GET",data:{nickname:this.content,sex:this.sexs[this.index],mobile:this.userInfo.mobile},success:function(e){0==e.code?t.showToast({title:"保存成功",mask:!1,duration:1500,icon:"none"}):t.showToast({title:e.msg,mask:!1,duration:1500,icon:"none"})},fail:function(){},complete:function(){}})},updateAvator:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(n){var i=n.tempFilePaths;console.log(n);t.uploadFile({url:e.$webUrl+"user_avatar_crop&token="+e.$store.getters.getUserInfo.token,filePath:i[0],name:"upfile",formData:{avatar:"test"},success:function(t){e.$store.dispatch("setAvator",JSON.parse(t.data).data)}})},error:function(t){console.log(t)}})},back:function(){t.navigateBack({delta:1})}},onLoad:function(){this.index=this.$utils.itemIndex(this.sex,this.sexs)},computed:{passUserName:function(){return this.$utils.defaultPlusXing(this.userInfo.user_name)},userInfo:function(){return this.$store.getters.getUserInfo},avator:function(){return this.userInfo.avatar.length>0?this.userInfo.avatar:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1548997951295&di=0f0d1f98941ac81b5a1210ae2481ca03&imgtype=0&src=http%3A%2F%2Fpic.90sjimg.com%2Fdesign%2F00%2F67%2F59%2F63%2F58e89bee922a2.png"},nickName:function(){return this.userInfo.nick_name.length>0?this.userInfo.nick_name:this.passUserName},sex:function(){return this.userInfo.sex},sexIndex:{get:function(){return this.index},set:function(t){this.index=t}}},components:{uniNavBar:i.default,neilModal:s.default}};e.default=o}).call(this,n("649d")["default"])},efcb:function(t,e,n){"use strict";n("316d");var i=a(n("b0ce")),s=a(n("40e2"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))}},[["efcb","common/runtime","common/vendor"]]]);